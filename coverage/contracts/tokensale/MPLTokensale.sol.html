<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/tokensale/MPLTokensale.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">contracts/tokensale/</a> MPLTokensale.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>118/118</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">80.88% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>55/68</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>43/43</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>127/127</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">146×</span>
<span class="cline-any cline-yes">146×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">92×</span>
<span class="cline-any cline-yes">91×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">65×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">64×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">102×</span>
<span class="cline-any cline-yes">102×</span>
<span class="cline-any cline-yes">102×</span>
<span class="cline-any cline-yes">102×</span>
<span class="cline-any cline-yes">102×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">12×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">90×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">95×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">61×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">61×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">61×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">53×</span>
<span class="cline-any cline-yes">53×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">53×</span>
<span class="cline-any cline-yes">53×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">67×</span>
<span class="cline-any cline-yes">67×</span>
<span class="cline-any cline-yes">66×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">65×</span>
<span class="cline-any cline-yes">65×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">65×</span>
<span class="cline-any cline-yes">32×</span>
<span class="cline-any cline-yes">22×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">32×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">32×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">65×</span>
<span class="cline-any cline-yes">57×</span>
<span class="cline-any cline-yes">57×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">65×</span>
<span class="cline-any cline-yes">22×</span>
<span class="cline-any cline-yes">22×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">65×</span>
<span class="cline-any cline-yes">65×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">28×</span>
<span class="cline-any cline-yes">56×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">27×</span>
<span class="cline-any cline-yes">27×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">17×</span>
<span class="cline-any cline-yes">17×</span>
<span class="cline-any cline-yes">16×</span>
<span class="cline-any cline-yes">14×</span>
<span class="cline-any cline-yes">13×</span>
<span class="cline-any cline-yes">13×</span>
<span class="cline-any cline-yes">13×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">185×</span>
<span class="cline-any cline-yes">185×</span>
<span class="cline-any cline-yes">185×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">185×</span>
<span class="cline-any cline-yes">95×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">90×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">183×</span>
<span class="cline-any cline-yes">154×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">154×</span>
<span class="cline-any cline-yes">154×</span>
<span class="cline-any cline-yes">154×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">29×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">29×</span>
<span class="cline-any cline-yes">28×</span>
<span class="cline-any cline-yes">28×</span>
<span class="cline-any cline-yes">28×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">114×</span>
<span class="cline-any cline-yes">114×</span>
<span class="cline-any cline-yes">114×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">114×</span>
<span class="cline-any cline-yes">114×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">77×</span>
<span class="cline-any cline-yes">77×</span>
<span class="cline-any cline-yes">77×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">37×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">pragma solidity ^0.4.24;
&nbsp;
import "../interface/ISaleConfig.sol";
import "../interface/IMPLTokensale.sol";
import "../interface/IMintable.sol";
import "../interface/IUserRegistry.sol";
import "./TokenMinter.sol";
import "./MPLTokensalePlan.sol";
&nbsp;
&nbsp;
/**
 * @title MPLTokensale
 * @dev MPLTokensale contract
 * This contract manage a sale as follow:
 *  - sale happens between a open and close date
 *  - ETHCHF in the form of WEI/Cent) rate is provided
 *    once the sale is over
 *  - investors must be first registred in order to invest
 *  - investors must claim their tokens at the end of the sale
 *    before the distribution is over.
 *  - The minter is given back to contract owner after the sale
 *    It is the minter contract responsability to handle
 *    the non distributed tokens
 *
 * Below a more technical view of the different events:
 *  - The contract is created with a sale configuration and a user
 *    registry
 *  - The minter contract is then set with the ownership
 *    given to the private sale
 *  - The sales happens and the contract receive ETH from investors
 *    During the sales, CHF investment may be added as they are received
 *  - At the end of the sales non-ETH, non-CHF investments are
 *    all converted into CHF and are then added by the admin.
 *    This includes Bitcoin, USD, EUR, ...
 *    Please contact the sale operator for more details on execution rates
 *  - Investments are reviewed for compliance by the admin
 *    and rejected if required
 *  - The ETHCHF rate is defined and if the conversion shows that 
 *    too much CHF were raised then a refund ratio is defined to
 *    compensate ETH investors
 *  - During the preparation of mint, the extra ETH received is refunfed
 *    and the number of tokens is defined
 *  - The minting can finally occures
 *  - After the distribution period, the minter is given back to the
 *    contract owner.
 *  - Minter contract should be look to see how more token
 *    may be minted.
 *
 * @author Cyril Lapinte - &lt;cyril.lapinte@mtpelerin.com&gt;
 *
 * Error messages
 * E01: No data are expected for the default function
 * E02: Minter must not be defined already
 * E03: Ownership of minter must be given to this contract
 * E04: Minter must be able to mint
 * E05: Not enough ETH to reject
 * E06: Not enough CHF to rejct
 * E07: ETHCHF rate must be greater than 0
 * E08: ETHCHF rate must be defined
 * E09: Investor must exist
 * E10: Investor has already been prepared
 * E11: Not all investors has been prepared
 * E12: Tokens have already been minted
 * E13: Not all investors have received their tokens
 * E14: Minter continue to allow token minting
 * E15: Minter ownership has not been given back to owner
 * E16: User must be valid
 * E17: Enough CHF is already raised
 * E18: Investment in ETH must be above the minimal investment
 * E19: Investor has no tokens
 */
contract MPLTokensale is IMPLTokensale, MPLTokensalePlan {
&nbsp;
  address public vault;
  TokenMinter public minter;
  IUserRegistry public userRegistry;
&nbsp;
  struct Investor {
    // ETH invested. The unit used is the Wei
    uint256 depositETH;
&nbsp;
    // CHF invested (this includes as well depositETH
    // once converted into CHF). The unit used is the cents
    uint256 depositCHF;
&nbsp;
    // Tokens to be minted for the investors
    uint256 tokens;
&nbsp;
    // Address to which ERC20 will be minted.
    // ETH in excess will also be refunded to this address.
    address destination;
&nbsp;
    // Investor is prepared for minting
    bool prepared;
    // Investor has been refunded
    bool refunded;
    // Investor's tokens has been minted
    bool minted;
  }
  mapping(uint256 =&gt; Investor) investors; // userId =&gt; Investor
&nbsp;
  uint256 public investorCount;
  uint256 public contributorCount;
  uint256 public preparedCount;
  uint256 public mintedCount;
&nbsp;
  // WEICHF rate is in ETH_wei/CHF_cents with no fractional parts
  uint256 public rateWEIPerCHFCent;
  uint256 public raisedCHF; // The unit is the cent
  uint256 public raisedETH;
&nbsp;
  // total with raisedCHF and raisedETH converted in CHF
  uint256 public totalRaisedCHF;
  uint256 public refundETH;
&nbsp;
  uint256 public refundRatio;
  uint256 constant public REFUND_PRECISION = 10 ** 9;
 
  /**
   * @dev Configure the MPL tokensale
   */
  constructor(
    address _vault,
    ISaleConfig _saleConfig,
    IUserRegistry _userRegistry
    ) MPLTokensalePlan(_saleConfig) public
  {
    vault = _vault;
    userRegistry = _userRegistry;
  }
&nbsp;
  /**
   * @dev fallback function
   */
  function () external payable {
    require(msg.data.length == 0, "E01");
    investETH();
  }
&nbsp;
  /**
   * @dev convert rate from ETH/CHF to WEI/CHFCents
   */
  function convertFromETHCHF(
    uint256 _rateETHCHF,
    uint256 _rateETHCHFDecimal) public pure returns (uint256)
  {
    if (_rateETHCHF == 0) {
      return 0;
    }
&nbsp;
    return uint256(
      10**(_rateETHCHFDecimal.add(18 - 2))
    ).div(_rateETHCHF);
  }
&nbsp;
  /**
   * @dev convert rate to ETH/CHF from WEI/CHFCents
   */
  function convertToETHCHF(
    uint256 _rateWEIPerCHFCent,
    uint256 _rateETHCHFDecimal) public pure returns (uint256)
  {
    if (_rateWEIPerCHFCent == 0) {
      return 0;
    }
&nbsp;
    return uint256(
      10**(_rateETHCHFDecimal.add(18 - 2))
    ).div(_rateWEIPerCHFCent);
  }
&nbsp;
  /**
   * @dev setup the token minter
   the MPL tokensale
   */
  function setupMinter(TokenMinter _minter)
    public whenStepIs(Stepname.CREATED)
  {
    <span class="missing-if-branch" title="else path not taken" >E</span>require(address(minter) == address(0), "E02");
    <span class="missing-if-branch" title="else path not taken" >E</span>require(_minter.owner() == address(this), "E03");
    <span class="missing-if-branch" title="else path not taken" >E</span>require(!_minter.mintingFinished(), "E04");
    minter = _minter;
    nextStep();
  }
&nbsp;
  /**
   * @dev getter need to be declared to comply with IMPLTokensale interface
   */
  function vault() public view returns (address) {
    return vault;
  }
&nbsp;
  /**
   * @dev getter need to be declared to comply with IMPLTokensale interface
   */
  function minter() public view returns (IMintable) {
    return minter;
  }
&nbsp;
  /**
   * @dev getter need to be declared to comply with IMPLTokensale interface
   */
  function userRegistry() public view returns (IUserRegistry) {
    return userRegistry;
  }
&nbsp;
  /**
   * @dev investor's depositETH
   */
  function investorDepositETH(uint256 _userId)
    public view returns (uint256)
  {
    return investors[_userId].depositETH;
  }
&nbsp;
  /**
   * @dev investor's depositCHF
   */
  function investorDepositCHF(uint256 _userId)
    public view returns (uint256)
  {
    return investors[_userId].depositCHF;
  }
&nbsp;
  /**
   * @dev investor's destination
   */
  function investorDestination(uint256 _userId)
    public view returns (address)
  {
    return investors[_userId].destination;
  }
&nbsp;
  /**
   * @dev investor's tokens
   */
  function investorTokens(uint256 _userId)
    public view returns (uint256)
  {
    return investors[_userId].tokens;
  }
&nbsp;
  /**
   * @dev investor is refunded
   */
  function investorIsRefunded(uint256 _userId)
    public view returns (bool)
  {
    return investors[_userId].refunded;
  }
&nbsp;
  /**
   * @dev investor's tokens have been prepared
   */
  function investorIsPrepared(uint256 _userId)
    public view returns (bool)
  {
    return investors[_userId].prepared;
  }
&nbsp;
  /**
   * @dev investor's tokens have been minted
   */
  function investorIsMinted(uint256 _userId)
    public view returns (bool)
  {
    return investors[_userId].minted;
  }
&nbsp;
  /**
   * @dev count of investors
   */
  function investorCount() public view returns (uint256) {
    return investorCount;
  }
&nbsp;
  /**
   * @dev count of contributors
   */
  function contributorCount() public view returns (uint256) {
    return contributorCount;
  }
&nbsp;
  /**
   * @dev count of prepared investors
   */
  function preparedCount() public view returns (uint256) {
    return preparedCount;
  }
&nbsp;
  /**
   * @dev count of minted investors
   */
  function mintedCount() public view returns (uint256) {
    return mintedCount;
  }
&nbsp;
  /**
   * @dev getter need to be declared to comply with IMPLTokensale interface
   */
  function rateWEIPerCHFCent() public view returns (uint256) {
    return rateWEIPerCHFCent;
  }
&nbsp;
  /**
   * @dev getter need to be declared to comply with IMPLTokensale interface
   */
  function rateETHCHF(uint256 _rateETHCHFDecimal)
    public view returns (uint256)
  {
    return convertToETHCHF(rateWEIPerCHFCent, _rateETHCHFDecimal);
  }
&nbsp;
  /**
   * @dev getter need to be declared to comply with IMPLTokensale interface
   */
  function raisedCHF() public view returns (uint256) {
    return raisedCHF;
  }
&nbsp;
  /**
   * @dev getter need to be declared to comply with IMPLTokensale interface
   */
  function totalRaisedCHF() public view returns (uint256) {
    return totalRaisedCHF;
  }
&nbsp;
  /**
   * @dev getter need to be declared to comply with IMPLTokensale interface
   */
  function raisedETH() public view returns (uint256) {
    return raisedETH;
  }
&nbsp;
  /**
   * @dev getter need to be declared to comply with IMPLTokensale interface
   */
  function refundETH() public view returns (uint256) {
    return refundETH;
  }
&nbsp;
  /**
   * @dev getter need to be declared to comply with IMPLTokensale interface
   */
  function refundRatio() public view returns (uint256) {
    return refundRatio;
  }
&nbsp;
  /**
   * @dev getter need to be declared to comply with IMPLTokensale interface
   */
  function refundPrecision() public pure returns (uint256) {
    return REFUND_PRECISION;
  }
&nbsp;
  /**
   * @dev Invest ETH callable by any registred participants
   */
  function investETH() public payable whenStepIs(Stepname.LIVE) {
    invest(msg.sender, msg.value, 0);
  }
&nbsp;
  /**
   * @dev Add off chain investments with their CHF counter value
   * The operation is done by the contract owner
   * It may be done outside the sale timeframes
   * as depending on the investments
   * origin extra compliance checks may be needed.
   */
  function addOffChainInvestment(address _investor, uint256 _amountCHF)
    public onlyOwner whenBetweenSteps(Stepname.READY, Stepname.REVIEW)
  {
    invest(_investor, 0, _amountCHF);
  }
&nbsp;
 /**
   * @dev reject ETH funds in case of unability to meet compliance
   * requirements or simply if an investor sent too much ETH
   */
  function rejectETHFunds(uint256 _userId, uint256 _amount)
    public onlyOwner whenBetweenSteps(Stepname.READY, Stepname.REVIEW)
  {
    Investor storage investor = investors[_userId];
    require(investor.depositETH &gt;= _amount, "E05");
    investor.depositETH = investor.depositETH.sub(_amount);
    investor.destination.transfer(_amount);
    emit InvestmentETHRejected(investor.destination, _amount);
  }
&nbsp;
  /**
   * @dev reject CHF funds in case of unability to meet
   * financial compliance requirements
   */
  function rejectCHFFunds(uint256 _userId, uint256 _amount)
    public onlyOwner whenBetweenSteps(Stepname.READY, Stepname.REVIEW)
  {
    Investor storage investor = investors[_userId];
    require(investor.depositCHF &gt;= _amount, "E06");
    investor.depositCHF = investor.depositCHF.sub(_amount);
    raisedCHF = raisedCHF.sub(_amount);
    emit InvestmentCHFRejected(investor.destination, _amount);
  }
&nbsp;
  /**
   * @dev Convert raised ETH to CHF and define the refund ratio
   * The function should be callable many times in order to correct
   * input errors on the ETHCHF rate
   *
   * @param _rateETHCHF rate (price of 1 ETH in CHF)
   * @param _rateETHCHFDecimal is the number of decimals in the first parameter 
   * Ex: 512.34 is provided as (51234, 2)
   */
  function defineRate(uint256 _rateETHCHF, uint256 _rateETHCHFDecimal)
    public onlyOwner whenStepIs(Stepname.REVIEW) 
  {
    <span class="missing-if-branch" title="else path not taken" >E</span>require(_rateETHCHF != 0, "E07");
    // The rate is inverted to maximize the decimals stored
    rateWEIPerCHFCent = convertFromETHCHF(_rateETHCHF, _rateETHCHFDecimal);
&nbsp;
    evaluateSale();
  }
&nbsp;
  /**
   * @dev processSale
   * Investments have been reviewed. The ETHCHF rate is fixed
   */
  function processSale()
    public onlyOwner whenStepIs(Stepname.REVIEW)
  {
    <span class="missing-if-branch" title="else path not taken" >E</span>require(rateWEIPerCHFCent != 0, "E08");
    evaluateSale();
&nbsp;
    nextStep();
    emit SaleProcessed(totalRaisedCHF, refundETH);
  }
&nbsp;
 /**
   * @dev Prepare minting the tokens for an investor
   * This operation will define the number of tokens mintable
   * for that investor
   * This operation also triggers the ETH refund
   */
  function prepareMinting(uint256 _userId)
    public onlyOwner whenStepIs(Stepname.PREPARE)
  {
    Investor storage investor = investors[_userId];
    require(investor.destination != address(0), "E09");
    require(!investor.prepared, "E10");
&nbsp;
    uint256 refundETHAmount = 0;
    uint256 contributionCHF = investor.depositCHF;
&nbsp;
    if (investor.depositETH &gt; 0) {
      if (refundRatio &gt; 0) {
        refundETHAmount = investor.depositETH.mul(
          REFUND_PRECISION).div(refundRatio);
      }
&nbsp;
      uint256 convertedCHFDeposit = (
        investor.depositETH.sub(refundETHAmount)).div(rateWEIPerCHFCent);
      contributionCHF = contributionCHF.add(convertedCHFDeposit);
    }
&nbsp;
    if (contributionCHF &gt; 0) {
      investor.tokens = contributionCHF.mul(saleConfig.tokensAmountPerCHF());
      contributorCount++;
    }
&nbsp;
    if (!investor.refunded &amp;&amp; refundETHAmount &gt; 0) {
      investor.refunded = true;
      investor.destination.transfer(refundETHAmount);
    }
&nbsp;
    investor.prepared = true;
    preparedCount++;
  }
&nbsp;
  /**
   * @dev prepare minting tokens for many users
   */
  function prepareMintingForManyUsers(uint256[] _userIds)
    public onlyOwner whenStepIs(Stepname.PREPARE)
  {
    for (uint256 i = 0; i &lt; _userIds.length; i++) {
      prepareMinting(_userIds[i]);
    }
  }
&nbsp;
  /**
   * @dev enable minting
   **/
  function enableMinting() public onlyOwner whenStepIs(Stepname.PREPARE) {
    <span class="missing-if-branch" title="else path not taken" >E</span>require(preparedCount == investorCount, "E10");
    nextStep();
  }
&nbsp;
  /**
   * @dev mint tokens for a user
   */
  function mintSelf() public whenStepIs(Stepname.MINT) {
    uint256 userId = userRegistry.userId(msg.sender);
    mint(userId);
  }
&nbsp;
  /**
   * @dev mint tokens for a user
   */
  function mint(uint256 _userId) public whenStepIs(Stepname.MINT) {
    Investor storage investor = investors[_userId];
    require(investor.destination != address(0), "E09");
    require(investor.tokens &gt; 0, "E19");
    require(!investor.minted, "E12");
    <span class="missing-if-branch" title="else path not taken" >E</span>if (minter.mint(investor.destination, investor.tokens)) {
      investor.minted = true;
      mintedCount++;
    }
  }
&nbsp;
  /**
   * @dev mint tokens for many users
   */
  function mintForManyUsers(uint256[] _userIds)
    public onlyOwner whenBetweenSteps(Stepname.MINT, Stepname.FINALIZE)
  {
    for (uint256 i = 0; i &lt; _userIds.length; i++) {
      mint(_userIds[i]);
    }
  }
&nbsp;
  /**
   * @dev withdraw ETH funds from the MPL tokensale
   */
  function withdrawETHFunds() public onlyOwner {
    uint256 balance = address(this).balance;
    vault.transfer(balance);
    emit WithdrawETH(balance);
  }
&nbsp;
  /**
   * @dev finish the distribution and release the minter ownership
   */
  function finishDistribution() public
    whenStepIs(Stepname.FINALIZE) onlyOwner
  {
    <span class="missing-if-branch" title="else path not taken" >E</span>require(mintedCount == contributorCount, "E13");
&nbsp;
    <span class="missing-if-branch" title="else path not taken" >E</span>if (!minter.mintingFinished()) {
      minter.finishMinting();
    }
&nbsp;
    <span class="missing-if-branch" title="else path not taken" >E</span>if (minter.owner() == address(this)) {
      minter.transferOwnership(owner);
    }
&nbsp;
    <span class="missing-if-branch" title="else path not taken" >E</span>require(minter.mintingFinished(), "E14");
    <span class="missing-if-branch" title="else path not taken" >E</span>require(minter.owner() == owner, "E15");
    nextStep();
  }
&nbsp;
  /**
   * @dev invest ETH callable by any registred participants
   */
  function invest(
    address _destination,
    uint256 _depositETH,
    uint256 _depositCHF) internal
  {
    uint256 userId = userRegistry.userId(_destination);
    <span class="missing-if-branch" title="else path not taken" >E</span>require(userRegistry.isValid(userId), "E16");
    Investor storage investor = investors[userId];
&nbsp;
    if (_depositCHF &gt; 0) {
      require(
        saleConfig.tokensaleLot1HardCapCHF() &gt;= raisedCHF.add(_depositCHF),
        "E17"
      );
    } else {
      require(_depositETH &gt; saleConfig.minimalETHInvestment(), "E18");
    }
&nbsp;
    if (investor.destination == address(0)) {
      investors[userId] = Investor(
        _depositETH,
        _depositCHF,
        0,
        _destination,
        false,
        false,
        false
      );
      raisedCHF = raisedCHF.add(_depositCHF);
      investorCount++;
      emit Investment(_destination, _depositETH, _depositCHF);
    } else {
      if (_depositETH &gt; 0) {
        investor.depositETH = investor.depositETH.add(_depositETH);
        emit Investment(investor.destination, _depositETH, 0);
      }
&nbsp;
      if (_depositCHF &gt; 0) {
        investor.depositCHF = investor.depositCHF.add(_depositCHF);
        raisedCHF = raisedCHF.add(_depositCHF);
        emit Investment(investor.destination, 0, _depositCHF); 
      }
    }
  }
&nbsp;
  /**
   * @dev evaluate the value of the sale
   * The function should be callable many times in order to correct any input errors
   *
   */
  function evaluateSale() private {
    totalRaisedCHF = 0;
    raisedETH = address(this).balance;
    uint256 admissibleETH = (
      saleConfig.tokensaleLot1HardCapCHF().sub(raisedCHF)).mul(rateWEIPerCHFCent);
    refundETH = 0;
    if ( raisedETH &gt; admissibleETH ) {
      // Due to variability in the ETHCHF rate too many ETH were raised
      // Excess ETHs are refunded equally amoung ETH investors
      refundETH = raisedETH.sub(admissibleETH); 
      refundRatio = raisedETH.mul(REFUND_PRECISION).div(refundETH);
      totalRaisedCHF = raisedCHF.add(admissibleETH.div(rateWEIPerCHFCent));
    } else {
      totalRaisedCHF = raisedCHF.add(raisedETH.div(rateWEIPerCHFCent));
    }
  }
&nbsp;
  event Investment(
    address indexed investor,
    uint256 amountETH,
    uint256 amountCHF
  );
  event InvestmentETHRejected(address indexed investor, uint256 amount);
  event InvestmentCHFRejected(address indexed investor, uint256 amount);
  event SaleProcessed(uint256 raisedCHF, uint256 refundETH);
  event WithdrawETH(uint256 amount);
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Tue Sep 04 2018 23:47:52 GMT+0000 (UTC)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
